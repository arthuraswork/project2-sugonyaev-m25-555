# PrimitiveDB

Простая реляционная база данных с интерфейсом командной строки, реализованная на Python.

## Описание

PrimitiveDB - это легковесная СУБД, поддерживающая базовые операции с данными (DML) и определение схемы (DDL). База данных хранит информацию в JSON-файлах и предоставляет интуитивно понятный SQL-подобный синтаксис для работы с данными.

## Архитектура

Проект состоит из следующих модулей:

### Основные модули:

- **`main.py`** - Точка входа, запускает основной цикл работы БД
- **`engine.py`** - Движок базы данных, связывает парсер и ядро
- **`core.py`** - Ядро системы, реализует основные операции с данными
- **`parser.py`** - Парсер SQL-подобных запросов
- **`consts.py`** - Константы, перечисления и служебные данные
- **`decorators.py`** - Декораторы для логирования, подтверждения и тайминга
- **`utils.py`** - Вспомогательные функции для работы с файлами

## Функциональность

### Поддерживаемые команды DDL (Data Definition Language):

- `create table <имя> {<тип> <поле1>, <тип> <поле2>, ...}` - создание таблицы
- `drop table <имя>` - удаление таблицы (с подтверждением)
- `info <имя_таблицы>` - информация о структуре таблицы
- `list` - список всех таблиц

### Поддерживаемые команды DML (Data Manipulation Language):

- `insert into <таблица> values {<поле1>:<значение1>, <поле2>:<значение2>}` - вставка данных
- `select * from <таблица>` - выбор всех записей
- `select * from <таблица> where (<поле> <операция> <значение>)` - выбор с условием
- `update <таблица> set {<поле> = <новое_значение>} where (<поле_условия> <операция> <значение>)` - обновление
- `delete from <таблица> where <поле> <операция> <значение>` - удаление записей

### Сервисные команды:

- `help` - справочная информация
- `exit` - выход из программы

## Поддерживаемые типы данных

- `int` - целые числа
- `str` - строки (в одинарных кавычках)
- `bool` - логические значения (`true`/`false`)

## Операции сравнения

- `=` (равно)
- `!=` (не равно)
- `<` (меньше)
- `>` (больше)
- `<=` (меньше или равно)
- `>=` (больше или равно)
- `~` (содержит в строке)


## Структура хранения данных

- **Метаданные**: `db_meta.json` - информация о таблицах и их структурах
- **Данные таблиц**: `src/data/<имя_таблицы>.json` - данные каждой таблицы
- **Автоматическое поле**: Каждая таблица получает поле `id` типа `int` как первичный ключ

## Начало работы

Перед началом работы убедитесь, что у вас установлены poetry и git

### Установка Запуск
```bash
    git clone https://github.com/arthuraswork/project2-sugonyaev-m25-555
    cd project2-sugonyaev-m25-555
    #-- вариант A
    poetry lock
    poetry install
    poetry run database
    #-- вариант Б
    make run
    
    #--В дальнейшем 
    poetry run database
```

## Сокращенные версии команд

```sql

    select * from <таблица> (<условие>)
    insert into <таблица> {<тип: поле>}
    update <таблица> {<поле = новое значение>} (<условие>)

```

## Примеры работы

```sql
-- Создание таблицы
create table products {str name, int price, str category}

-- Вставка данных
insert into products values {name: 'Laptop', price: 1000, category: 'Electronics'}

-- Выборка с условием
select * from products where (price > 500)

-- Обновление данных
update products set {price: 900} where (name = 'Laptop')

-- Удаление данных
delete from products where (category = 'Electronics')

-- Удаление таблицы
drop table products
```
## Демонстрация

[![asciicast](https://asciinema.org/a/shYsj4p8s7R9857QdULmxGso7.svg)](https://asciinema.org/a/shYsj4p8s7R9857QdULmxGso7)
